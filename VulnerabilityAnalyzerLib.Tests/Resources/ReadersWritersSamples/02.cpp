#include <iostream>
#include <thread>
#include <mutex>
#include "windows.h"
using namespace std;

int Z = 5;
std::mutex mtx;

void read()
{
	
	while (true) {
		// Some read activities with shared resource
		mtx.lock();
		bool shouldExit = Z == 100;
		printf("%d", Z);
		mtx.unlock();
		if (shouldExit) {
			return;
		}
		Sleep(1);
	}
}


void write() {
	while (true) {
		// Some write activities with shared resource
		mtx.lock();
		Z += 1;
		bool shouldExit = Z == 100;
		mtx.unlock();
		if (shouldExit) {
			return;
		}
	}
}


int main()
{
	thread r1(read1);
	thread w1(write);

	r1.join();
	w1.join();

	return 0;
}
